{% extends 'base.html' %}

{% block title %}Connect Gmail - Job Tracker{% endblock %}

{% block content %}
<div class="page-header">
    <h1 class="page-title">Connect Gmail</h1>
</div>

<div class="card" style="max-width: 500px; margin: 0 auto; text-align: center;">
    <div class="card-header">
        <h2 class="card-title">Gmail Integration</h2>
    </div>
    <p style="margin-bottom: 1.5rem; color: #7f8c8d;">
        Connect your Gmail inbox to automatically track job application emails.
    </p>
    <button class="btn btn-primary" id="login-btn" type="button" style="padding: 0.75rem 2rem; font-size: 1.1rem;">
        Sign in with Gmail
    </button>
    <p style="margin-top: 1rem; font-size: 0.875rem; color: #95a5a6;">
        We only request read-only access to your emails.
    </p>
</div>

<script>
    async function startLogin() {
        const response = await fetch("{% url 'gmail:google-login' %}");
        const data = await response.json();
        if (data.auth_url) {
            window.location.href = data.auth_url;
            return;
        }
        alert(data.error || "Unable to start login.");
    }

    document.getElementById("login-btn").addEventListener("click", startLogin);
</script>
{% endblock %}
